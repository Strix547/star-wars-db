(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(49)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},41:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),c=a.n(l),i=(a(29),a(30),a(31),a(32),a(6)),s=function(){return r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement(i.b,{to:"/"},"Star Wars DB")),r.a.createElement("nav",null,r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement(i.b,{to:"/people/"},"People")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/planets/"},"Planets")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/starships/"},"Starships")))))},o=a(7),u=a(8),m=a(10),p=a(9),f=a(11),d=(a(41),a(2)),h=a.n(d),E=a(12),g=function e(){var t=this;Object(o.a)(this,e),this.apiURL="https://swapi.co/api",this.imageURL="https://starwars-visualguide.com/assets/img",this.getResource=function(){var e=Object(E.a)(h.a.mark(function e(a){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.apiURL).concat(a),{mode:"no-cors"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could't fetch ".concat(a,", received ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.transformPerson=function(e){var t=e.url,a=e.name,n=e.gender,r=e.birth_year,l=e.hair_color,c=e.eye_color,i=e.height,s=e.mass;return{id:t.slice(28,-1),name:a,gender:n,birthYear:r,hairColor:l,eyeColor:c,height:i,mass:s}},this.transformPlanet=function(e){var t=e.url,a=e.name,n=e.climate,r=e.diameter,l=e.population,c=e.rotation_period;return{id:t.slice(29,-1),name:a,climate:n,diameter:r,population:l,rotationPeriod:c}},this.transformStarship=function(e){var t=e.url,a=e.name,n=e.cost_in_credits,r=e.max_atmosphering_speed,l=e.crew,c=e.passengers,i=e.model,s=e.starship_class;return{id:t.slice(31,-1),name:a,cost:n,speed:r,crew:l,passengers:c,model:i,starshipClass:s}},this.getPerson=function(){var e=Object(E.a)(h.a.mark(function e(a){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/".concat(a));case 2:return n=e.sent,e.abrupt("return",t.transformPerson(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getAllPeople=Object(E.a)(h.a.mark(function e(){var a,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/");case 2:return a=e.sent,n=a.results,e.abrupt("return",n.map(t.transformPerson));case 5:case"end":return e.stop()}},e)})),this.getPlanet=function(){var e=Object(E.a)(h.a.mark(function e(a){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/".concat(a));case 2:return n=e.sent,e.abrupt("return",t.transformPlanet(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getAllPlanets=Object(E.a)(h.a.mark(function e(){var a,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/");case 2:return a=e.sent,n=a.results,e.abrupt("return",n.map(t.transformPlanet));case 5:case"end":return e.stop()}},e)})),this.getStarship=function(){var e=Object(E.a)(h.a.mark(function e(a){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/".concat(a));case 2:return n=e.sent,e.abrupt("return",t.transformStarship(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getAllStarships=Object(E.a)(h.a.mark(function e(){var a,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/");case 2:return a=e.sent,n=a.results,e.abrupt("return",n.map(t.transformStarship));case 5:case"end":return e.stop()}},e)})),this.getPersonImg=function(e){return"".concat(t.imageURL,"/characters/").concat(e,".jpg")},this.getStarshipImg=function(e){return"".concat(t.imageURL,"/starships/").concat(e,".jpg")},this.getPlanetImg=function(e){return"".concat(t.imageURL,"/planets/").concat(e,".jpg")}},b=(a(44),function(){return r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-rolling"},r.a.createElement("div",null)))}),v=(a(45),function(){return r.a.createElement("div",{className:"error-indicator"},r.a.createElement("p",{className:"boom"},"BOOM!"),r.a.createElement("p",null,"something has gone terribly wrong"),r.a.createElement("p",null,"(but we already sent droids to fix it)"))}),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).swapiService=new g,a.state={planet:null,isLoad:!1,hasError:!1},a.componentDidMount=function(){setInterval(a.updatePlanet,3e3)},a.updatePlanet=function(){var e=Math.floor(2+15*Math.random());a.swapiService.getPlanet(e).then(a.onPlanetLoaded).catch(a.onError)},a.onError=function(e){a.setState({hasError:!0,isLoad:!0})},a.onPlanetLoaded=function(e){a.setState({planet:e,isLoad:!0})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoad,a=e.hasError,n=e.planet,l=!(!t||a),c=a?r.a.createElement(v,null):null,i=t?null:r.a.createElement(b,null),s=l?r.a.createElement(j,{planet:n}):null;return r.a.createElement("div",{className:"random-planet"},c,i,s)}}]),t}(n.Component),j=function(e){var t=e.planet,a=t.id,n=t.name,l=t.climate,c=t.diameter,i=t.population,s=t.rotationPeriod;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:"https://starwars-visualguide.com/assets/img/planets/".concat(a,".jpg"),alt:"planet ".concat(n)}),r.a.createElement("div",{className:"desc"},r.a.createElement("h3",null,n),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,"Climate: "),r.a.createElement("span",null,l)),r.a.createElement("li",null,r.a.createElement("span",null,"Diameter: "),r.a.createElement("span",null,c)),r.a.createElement("li",null,r.a.createElement("span",null,"Population: "),r.a.createElement("span",null,i)),r.a.createElement("li",null,r.a.createElement("span",null,"Rotation period: "),r.a.createElement("span",null,s)))))},O=w,I=(a(46),function(){return r.a.createElement("div",{id:"background"},r.a.createElement("div",{className:"stars"}),r.a.createElement("div",{className:"twinkling"}))}),P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},a.componentDidCatch=function(){a.setState({hasError:!0})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.hasError?r.a.createElement(v,null):this.props.children}}]),t}(n.Component),y=r.a.createContext(),S=y.Provider,L=y.Consumer,x=a(13),k=(a(47),function(e){var t=e.item,a=e.field,n=e.label;return r.a.createElement("li",null,r.a.createElement("span",null,n),":",r.a.createElement("span",null," ",t[a]))}),C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).swapiService=new g,a.state={item:null,img:null,isLoad:!1},a.componentDidMount=function(){a.updateItem()},a.componentDidUpdate=function(e){a.props.itemId!==e.itemId&&(a.updateItem(),a.setState({isLoad:!1}))},a.updateItem=function(){var e=a.props,t=e.itemId,n=e.getItemInfo,r=e.getImageURL;t&&n(t).then(function(e){a.setState({item:e,img:r(t),isLoad:!0})})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){if(!this.state.item)return null;var e=this.state,t=e.item,a=e.img,n=e.isLoad,l=n?null:r.a.createElement(b,null),c=n?r.a.createElement(R,Object.assign({item:t,img:a},this.props)):null;return r.a.createElement("div",{className:"item-info"},l,c)}}]),t}(n.Component),R=function(e){var t=e.item,a=e.children,n=e.img,l=t.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:n,alt:l}),r.a.createElement("ul",null,r.a.Children.map(a,function(e){return r.a.cloneElement(e,{item:t})})))},N=C,D=function(e){return function(t){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={data:null,isLoad:!1,hasError:!1},t.componentDidMount=function(){t.update()},t.update=function(){t.setState({isLoad:!1,hasError:!1}),t.props.getData().then(function(e){t.setState({data:e,isLoad:!0})}).catch(function(){t.setState({hasError:!0,isLoad:!0})})},t}return Object(f.a)(a,t),Object(u.a)(a,[{key:"render",value:function(){var t=this.state,a=t.data,n=t.isLoad,l=t.hasError;return n?l?r.a.createElement(v,null):r.a.createElement(e,Object.assign({},this.props,{data:a})):r.a.createElement(b,null)}}]),a}(n.Component)},A=function(e){return function(t){return function(a){return r.a.createElement(L,null,function(n){var l=e(n);return r.a.createElement(t,Object.assign({},a,l))})}}},U=function(e){return function(t){return function(a){return r.a.createElement(t,a,e)}}},_=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},M=A(function(e){return{getItemInfo:e.getStarship,getImageURL:e.getStarshipImg}})(function(e){return r.a.createElement(N,e,r.a.createElement(k,{field:"name",label:"Name"}),r.a.createElement(k,{field:"starshipClass",label:"Class"}),r.a.createElement(k,{field:"speed",label:"Speed"}),r.a.createElement(k,{field:"cost",label:"Cost"}),r.a.createElement(k,{field:"crew",label:"Crew"}),r.a.createElement(k,{field:"passengers",label:"Passengers"}))}),B=A(function(e){return{getItemInfo:e.getPlanet,getImageURL:e.getPlanetImg}})(function(e){return r.a.createElement(N,e,r.a.createElement(k,{field:"name",label:"Name"}),r.a.createElement(k,{field:"population",label:"Population"}),r.a.createElement(k,{field:"climate",label:"Climate"}),r.a.createElement(k,{field:"diameter",label:"Diameter"}),r.a.createElement(k,{field:"rotationPeriod",label:"Rotation period"}))}),F=A(function(e){return{getItemInfo:e.getPerson,getImageURL:e.getPersonImg}})(function(e){return r.a.createElement(N,e,r.a.createElement(k,{field:"name",label:"Name"}),r.a.createElement(k,{field:"gender",label:"Gender"}),r.a.createElement(k,{field:"birthYear",label:"Birth year"}),r.a.createElement(k,{field:"hairColor",label:"Hair color"}),r.a.createElement(k,{field:"eyeColor",label:"Eye color"}),r.a.createElement(k,{field:"height",label:"Height"}),r.a.createElement(k,{field:"mass",label:"Mass"}))}),W=(a(48),function(e){var t=e.data,a=e.onItemSelected,n=e.children,l=t.map(function(e){var t=e.id,l=n(e);return r.a.createElement("li",{key:t,onClick:function(){return a(t)}},l)});return r.a.createElement("ul",{className:"item-list"},l)}),H=_(A(function(e){return{getData:e.getAllPeople}}),D,U(function(e){var t=e.name,a=e.gender;return r.a.createElement("span",null,t," (",a,")")}))(W),J=_(A(function(e){return{getData:e.getAllPlanets}}),D,U(function(e){var t=e.name,a=e.climate;return r.a.createElement("span",null,t," (",a,")")}))(W),Y=_(A(function(e){return{getData:e.getAllStarships}}),D,U(function(e){var t=e.name,a=e.starshipClass;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t)," ",r.a.createElement("p",null,"(",a,")"))}))(W),G=Object(x.e)(function(e){var t=e.history,a=e.match.params.id;return r.a.createElement("div",{className:"item-block"},r.a.createElement(H,{onItemSelected:function(e){return t.push(e)}}),r.a.createElement(F,{itemId:a}))}),q=Object(x.e)(function(e){var t=e.history,a=e.match.params.id;return r.a.createElement("div",{className:"item-block"},r.a.createElement(J,{onItemSelected:function(e){return t.push(e)}}),r.a.createElement(B,{itemId:a}))}),z=Object(x.e)(function(e){var t=e.match,a=e.history,n=t.params.id;return r.a.createElement("div",{className:"item-block"},r.a.createElement(Y,{onItemSelected:function(e){return a.push(e)}}),r.a.createElement(M,{itemId:n}))}),K=function(){var e=new g;return r.a.createElement(P,null,r.a.createElement(S,{value:e},r.a.createElement(i.a,{basename:"/star-wars-db/"},r.a.createElement("div",{id:"app"},r.a.createElement(s,null),r.a.createElement(O,null),r.a.createElement(x.c,null,r.a.createElement(x.a,{path:"/",exact:!0,render:function(){return r.a.createElement("h2",null,"Welcome to Star Wars DB")}}),r.a.createElement(x.a,{path:"/people/:id?",exact:!0,component:G}),r.a.createElement(x.a,{path:"/planets/:id?",exact:!0,component:q}),r.a.createElement(x.a,{path:"/starships/:id?",exact:!0,component:z}),r.a.createElement(x.a,{render:function(){return r.a.createElement("h2",null,"Page is not found")}})),r.a.createElement(I,null)))))};c.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.a080f56c.chunk.js.map